# Consolidated Report Workflow (ReportManager)

CortexDx can store every diagnose/orchestrate run as a structured artifact in addition to the ad-hoc Markdown/JSON files. Passing `--report-out <dir>` writes:

- `report.json`, `report.md`, `report.html`: consolidated findings with metadata.
- `index.db`: a SQLite catalog of all stored reports (session id, timestamp, severity).
- Per-run subdirectories organized by date/session depending on configuration.

## Running Locally

```bash
# Diagnose and persist reports
cortexdx diagnose https://mcp.example.com \
  --out reports \
  --report-out .cortexdx/reports

# Orchestrate LangGraph workflow with consolidated artifact
cortexdx orchestrate https://mcp.example.com \
  --workflow agent.langgraph.baseline \
  --report-out .cortexdx/reports
```

The CLI mirrors the behavior in CI (see `.github/workflows/cortexdx.yml`), so reviewers always get the same artifact layout whether the run happens locally or in GitHub Actions.

## Review Checklist

1. Download the `reports/` artifact generated by CI (look for the `report-out` directory).
2. Inspect the latest Markdown/JSON file (e.g., `orchestrate-workflow/<timestamp>/report.md`) to confirm findings/evidence.
3. Query `index.db` (e.g., using `sqlite3 index.db "SELECT id, diagnostic_type, created_at FROM reports ORDER BY created_at DESC;"`) to verify history and ensure multiple suites recorded their output.
4. Confirm `metadata` contains the suite/workflow identifiers plus any research summary (when `--research*` was used). If those fields are missing, request a re-run with the correct CLI flags.

Use this document as the reference whenever you need to add new report surfaces or explain the artifact hierarchy to reviewers.
